\ifx\all\undefined
\include{base}
\begin{document}
\fi
 
\chapter{Evaluación}

Este capítulo expone las pruebas realizadas sobre el sistema desarrollado y evalúa su comportamiento frente a los casos de uso planteados. El objetivo es estudiar cómo mejora el formato extendido sobre el estándar ISDB-Tb tradicional. Asimismo, se exponen las limitaciones del nuevo diseño.

\section{Infraestructura}

La \cref{fig:infra_extended} expone la infraestructura involucrada en la emisión de servicios a través de radiofrecuencia y una red IP. 

\begin{figure}[h]
	\begin{center}
	\includegraphics[width=15cm]{imgs/infraestructura_extendida.png}
	\caption{Infraestructura utilizada en la emisión de servicios con el esquema extendido.\label{fig:infra_extended}} 
	\end{center}
\end{figure}

En adición a los elementos comunes de televisión digital en la norma ISDB-Tb tradicional, el nuevo esquema necesita de dos entidades al final del \emph{pipeline} de producción de contenidos  para soportar el \emph{streaming} a través de una red IP.

El primero de los nuevos elementos es el servidor de \emph{streaming}, consiste en un \emph{host} de la red IP que corre un proceso que envía el contenido audiovisual del servicio al que corresponden. Los paquetes deben ser dirigidos al grupo y puerto multicast indicados en la información provista a través del \emph{service elementaries relocation descriptor} de la norma ISDB-Tb extendida. 

Para asegurar esta correspondencia, se introduce una segunda entidad. El \emph{coordinador} decide qué servicios se emiten en la señal ISDB-Tb de forma tradicional y cuáles por la red IP. Define, además, qué grupo multicast y puerto se usan para la emisión. Con esta información se completa del \emph{services elementaries relocation descriptor} y se configura al servidor de \emph{streaming} multicast.


\subsection{Cabeceras de transmisión}

Una transmisora de señal ISDB-Tb modula una señal que puede ser directamente intepretada por un decodificador. Esto es, el flujo de transporte provee todas las capas de abstracción necesarias para la comunicación. De esta forma soluciona problemas como sincronización, multiplexación y corrección de errores.

Las redes IP se basan en el intercambio de paquetes entre nodos. Pero la forma en que estos paquetes se intercambia recae sobre los protocolos de capa inferior a la capa IP y los enlaces que unen estos nodos. Si un flujo de transporte es enviado a través de una red IP, como es el caso de los servicios realocados, las capas inferiores incurren en un \emph{overhead} de comunicación, respecto de la señal ISDB-Tb.

En términos de la \cref{fig:infra_extended}, el enlace entre el servidor de \emph{streaming} resulta un eslabón clave en el esquema. Especialmente si se trata de un servidor que debe transmitir varios servicios por la red. La sobrecarga de esta vía implicaría que se vean afectados todos los servicios que emite si se alcanza su límite de acho de banda. Por el contrario, es más difícil encontrar sobrecargas sobre los enlaces de \emph{última milla}\footnote{Término utilizado en telecomunicaciones para referir al último extremo de la red que entrega conexión a los clientes.} porque no es de suponer que van a transportar un gran número de servicios simultáneamente.

\begin{figure}[h]
	\begin{center}
	\includegraphics[width=14cm]{imgs/infra_multiple_streamers.png}
	\caption{Infraestructura con múltiples servidores de \emph{streaming}\label{fig:infra_multiple_streamers}} 
	\end{center}
\end{figure}

La \cref{fig:infra_multiple_streamers} ilustra el caso en que los servicios se distribuyen a través de múltiples servidores de \emph{streamings}. En este caso, el cuello de botella podría hallarse en alguno de los enlaces \emph{backbone}\footnote{Principales enlaces de datos en una red. En este caso, en particular, refiere a una red IP.} si el enlace fuera una arista de corte\footnote{En teoría de grafos, refiere a una arista que, si se elimina, aumenta el número de componentes conexas de la topología}. Sin embargo, este tipo de enlaces dispone del mayor ancho de banda en toda la red.

Encontrar un cuello de botella en la red requiere de una topología, pero es común que los \emph{hosts} posean un único \emph{access point} (y, por ende, un único enlace) a la red. El ancho de banda del mismo limita el número y la calidad de los servicios que puede emitir un único servidor de \emph{streaming}. Para ejemplificar, se presenta la \cref{tab:bandwidth_limits}.

\begin{table}[H]
\begin{center}
\begin{tabular}{ | l | c | c | } 
\hline
Ancho de banda disponible  			& Número de servicios SD 	& 	Número de servicios HD  	\\
\hline 
\hline
30 Mbps 							& 14                        	& 2       					\\
100  Mbps 							& 47                           	& 8        					\\
1 Gbps 								& 476	    					& 82      					\\
\hline 
\end{tabular}
\caption{Cantidad de servicios que pueden ser emitidos por un enlace, considerando ancho de banda requerido.\label{tab:bandwidth_limits}}
\end{center}
\end{table}

Los valores presentados se basan en mediciones realizadas sobre conexiones ethernet sobre par trenzado, donde el \emph{overhead} de comunicación es de un $4.1\%$, en promedio. Este valor proviene del envío de 7\footnote{Es imposible enviar un número mayor de paquetes, dado que es ideal respetar el tamaño de ventana más común para redes IP de 1500 bytes.} paquetes de flujo de transporte (1316 bytes) sobre la cabecera del paquete UDP(8 bytes), la cabecera del paquete IP(20 bytes) y la cabecera de la trama \emph{ethernet}(26 bytes). 

%El ancho de banda de un enlace de fibra óptica oscila entre valores [podemos medir qué ancho de banda ocupa un servicio hd en una red común y de acuerdo a eso ver qué onda, asumiendo el overhead de los encabezados ip y eso...] (Eth/IP/UDP agrega un 5.5\% de overhead!, cuando en emisión ISDB-Tb es 0. Es decir, las mediciones toman el formato contenedor.)

\subsection{Infraestructura de prueba}


\begin{figure}[h]
	\begin{center}
	\includegraphics[width=10cm]{imgs/infraestructura_prueba.png}
	\caption{Esquema de las pruebas\label{fig:test_scheme}} 
	\end{center}
\end{figure}

Para las pruebas realizadas cuyos resultados se exponen en este capítulo se utilizó un esquema representado en la \cref{fig:test_scheme}. Las entidades que pueden observarse son:

\begin{itemize}
	\item \textbf{Host Multiplexador:} Controla la moduladora y provee el \emph{transport stream} extendido que se emite a través de la señal modulada. En este punto se introducen los elementos necesarios para señalizar los servicios que se obtienen a través de la red IP, identificada por la dirección IP asignada por el coordinador.
	\item \textbf{Moduladora}: Convierte el \emph{transport stream} en una señal radioeléctrica modulada.
	\item \textbf{\emph{Splitter:}} Mezcla la señal modulada que transporta el \emph{transport stream} generado y una señal regular de Televisión Digital Abierta. El objetivo de esta combinación es estudiar la convivencia del flujo de tranporte generado con otros tradicionales.
	\item \textbf{Sintonizador:} El sintonizador es la contrapartida de la moduadora, convierte una señal modulada en un \emph{bitstream} intepretable por \emph{Mara}.
	\item \textbf{Host de Mara:} Computadora que corre el reproductor de televisión y entrega los servicios al usuario, consumiendo de una u otra fuente de manera transparente.
	\item \textbf{Red IP:} Red con soporte de la \emph{suite} de protocolos IP, incluyendo emisión multicast.
	\item \textbf{Host de \emph{streaming}:} Emite el flujo de transporte que incluye el servicio realocado a través del grupo indicado por el coordinador..
\end{itemize}

[TODO: No se si primero habría que mostrar cómo se hicieron las pruebas y luego cómo se haría en un caso real o como está ahora mismo. Quizá acá habría que establecer una correspondencia entre el diagrama de infraestructura real y el diagrama de las pruebas.]

\section{Número de servicios}

El objetivo final del nuevo diseño es extender la lista de servicios provistos por una señal ISDB-Tb convencional, a través del aprovechamiento de redes IP disponibles para el decodificador.

En un flujo de transporte de una señal ISDB-Tb tradicional, la única limitación considerable para el número de servicios provistos viene dada por el ancho de banda disponible para transmitir los contenidos multimedia. En el caso del formato extendido, los servicios que se envían por IP no ocupan ancho de banda(en términos de contenido multimedia) y el mismo requerido por la información de señalización es despreciable.

Por otro lado, el formato MPEG impone restricciones sobre los flujos de transporte que se ven reflejadas en el nuevo diseño. Existen numerosas limitaciones de índole sintáctica(como es el tamaño de un campo que indica la longitud de una entidad) y de garantías para el receptor(como es el grado de precisión que deben poseer las marcas de tiempo). En particular, hay dos ejemplos de restricción que afectan directamente al nuevo diseño y establecen una cota superior para el número de servicios a transmitir. Estos son el límite de tamaño de sección y la imposición sobre la frecuencia de emisión de las tablas.

Por simplicidad es posible dividir las limitaciones por tablas. La \cref{fig:max_serv_num} muestra la limitación que impone cada tabla al número de servicios de un flujo de transporte. Por un lado, la barra roja indica cuántos servicios puede señalizar una tabla si ésta ocupa una sección completa y, por el otro, la barra azul indica cuántos servicios se pueden señalizar con un único paquete de flujo de transporte.

% TODO: La SDT puede dividirse en múltiples secciones. Así que hay que modificar esto y el dibujito para contemplarlo.

\begin{figure}[h]
	\begin{center}
	\includegraphics[width=10cm]{imgs/maximo_num_servicios.png}
	\caption{Cantidad máxima de servicios permitida por cada tabla.\label{fig:max_serv_num}} 
	\end{center}
\end{figure}

% TODO: Quizás un reordenamiento es lo ideal acá. Porque no se entiende bien que el cuello de botella se presente al medio.

\subsection{Tamaño de sección}

% Averiguar qué concha es el tamaño de sección. Porque si distintos pedazos de la tabla se pueden enviar en distintas secciones, estamos hasta la chota.
% A partir de ahí la SDT tiene que compartir ancho de banda con la PMT. Podría intentar construir un ts con una SDT de muchas secciones.
% Si ese es el caso, seríá útil hacer una escala de "para x servicios, y ancho de banda necesario"

Las tablas viajan en estructuras sintácticas denominadas \emph{secciones}. El encabezado de una sección contiene su longitud en bytes en un campo de \emph{12 bits}. Esto es, este campo limita la longitud a 4096 bytes. Pero el estándar ISDB-Tb, a su vez, define que sólo la sección que transporta una EIT puede alcanzar este tamaño. El resto de las secciones deben limitarse a \emph{1 kilobyte}. En consecuencia, las tablas involucradas en la señalización de servicios transportados por IP están acotadas a este tamaño. 

A continuación se analiza cómo influye esta cota sobre el número total de servicios. Todas las mediciones se realizaron construyendo flujos de transporte reales, donde las tablas y secciones fueron creadas y multiplexadas utilizando el conjunto de herramientas provisto por OpenCaster y \emph{ts\_util}\cite{tsutil}.

\subsubsection{PAT}

Al momento de extender la lista de servicios de un flujo de transporte, el número de PAT's que viajan se conserva igual. Existe una PAT por flujo de tranporte. Sin embargo, el tamaño de la sección que transporta la PAT impone, como muestra la \cref{fig:max_serv_num}, un máximo de 252 servicios, en promedio. Este valor podría disminuir ante la inclusión de descriptores o datos adicionales, pero este no es un caso común. Si además se deseara limitar el tamaño de la PAT a un único paquete, la cota se reduce a 41 servicios.

El motivo para utilizar una PAT de un único paquete radica en la drástica simplificación de la multiplexación y decodificación del flujo de transporte. Adicionalmente, implica un pequeño ahorro en el ancho de banda (que podría ser utilizado, por ejemplo, para agregar nuevas PMT's, aunque esto no implique una diferencia sustancial).

\subsubsection{SDT}

La SDT transporta contenido textual descriptivo de los servicios y ésto le confiere dependencia respecto de los servicios provistos por el flujo de transporte. Para realizar la medición del número máximo de servicios que permite esta tabla, se utilizaron nombres de una longitud promedio de 9 caracteres. Como puede apreciarse en la \cref{fig:max_serv_num}, una sección establece una cota superior de 50 servicios, mientras que una SDT de un único paquete puede describir hasta 8 servicios. Esto convierte a las SDT en una limitación real para el número se servicios señalizables por la extensión del estándar ISDB-Tb.

\subsection{Disponibilidad de paquetes nulos}

% Decir que son dos imposiciones diferentes la que hace que la PMT limite el numero de servicios y la que hace que la SDT lo haga.

Finalmente, resta analizar cómo influye la PMT sobre el número máximo de servicios que se pueden señalizar. A diferencia de las otras dos, la PMT no cambia en tamaño en la medida en que se agregan servicios, dado que aparecen nuevas instancias en lugar de modificar las existentes. El problema es que cada PMT requiere un PID distinto y cada PID requiere de un paquete de flujo de transporte distinto.

Cada uno de los servicios de un flujo de transporte requiere la emisión de una PMT asociada, así sea un servicio regular o uno cuyos flujos elementales se transmiten por IP. El estándar ISDB-Tb establece que el intervalo máximo de tiempo entre instancias de la tabla es de 200 milisegundos. Siendo que una sección se transporta en, al menos, un paquete, y el número de paquetes en un intervalo de tiempo es necesariamente finito, el número de servicios también lo es en consecuencia. 

Para este análisis se continúa con el ejemplo del Canal 23, presentado en el capítulo Introducción Técnica. De los $17.3 Mbps$ disponibles del flujo de tranporte, unos $2.4 Mbps$ son ocupados por paquetes nulos, los cuales pueden ser reemplazados por una PMT de un servicio realocado. Esta cifra representa unos 1500 paquetes nulos por segundo. La norma ISDB-Tb determina que las instancias de la PMT deben encontrarse en un período regular de $200 ms$, un quinto de segundo. Así, la cantidad de paquetes disponibles para insertar PMT's se aproxima a los 300.

Esta estimación indica que el número máximo de servicios, si de la PMT depende, tiene una cota superior en 300. Pero existe un problema adicional con la estimación y es que no hay motivos para creer que este número no disminuirá en alguna porción del flujo de transporte. Además, la cota superior real es el mínimo local absoluto de número de paquetes nulos en períodos de $200ms$ en todo el flujo de transporte. Siendo que este es arbitrariamente largo, es imposible determinar este número. 

\begin{figure}[h]
	\begin{center}
	\includegraphics[width=14cm]{imgs/nulos_disponibles.png}
	\caption{Gráfico lineal de disponibilidad de paquetes nulos en el flujo de transporte\label{fig:null_available}} 
	\end{center}
\end{figure}

La \cref{fig:null_available} presenta los resultados de una medición sobre un fragmento real de flujo de transporte de Canal 23. Muestra el conteo de paquetes nulos disponibles en los siguientes $200 ms$ de reproducción para cada instante de un fragmento de flujo de transporte de dos minutos y medio de duración. Se puede apreciar que el mínimo alcanzado es de 271 paquetes para un instante que ronda el segundo 86. Esto quiere decir que el número máximo de PMT's que se puede incluir dada esta sección del flujo de transporte supera las 200 instancias. 

Como la figura \cref{fig:max_serv_num} muestra, es indistinto el hecho de que la tabla ocupe un único paquete o una sección completa, dado que no es el tamaño la limitación de la tabla, sino el número de repeticiones posibles en el intervalo de tiempo establecido por el estándar ISDB-Tb. En conclusión, una estimación conservadora del número máximo de servicios que se pueden incluir en un flujo de transporte con características similares al de Canal 23 es de 200 servicios.


\section{Aspectos adicionales}

Esta sección compara los servicios regulares ISDB-Tb con los servicios realocados a través del \emph{service elementaries relocation descriptor} en distintos términos de la televisión digital. La  \cref{tab:evalcomparison} categoriza los distintos aspectos de la comparación, que se desarrollan en las subsecciones siguientes.

\renewcommand{\thefootnote}{\fnsymbol{footnote}}
\taburowcolors[2]{white .. black!20}

\begin{figure}[h]
\footnotesize
\tabulinesep=6pt
\begin{tabu}{|>{\cellcolor{black!60}\color{white}}r|X[cm]|X[cm]|}
\hline
\rowcolor{black!80}\strut  & \color{white}Servicios Regulares & \color{white}Servicios Realocados \\
Múltiples flujos elementales & \cmark & \xmark* \\
Guía electrónica de programación & \cmark & \cmark \\
\emph{Closed Caption} & \cmark & \xmark* \\
Trazabilidad & \xmark & \cmark \\
Aplicaciones Interactivas & \cmark & \xmark \\
% Independencia de calidad de servicio & \xmark & \cmark \\
% Sintonización múltiple simultánea & \xmark & \cmark \\
Velocidad de sintonización & ~$1.8$ seg & Dependiente de la red \\
\hline
\end{tabu}
\caption{Comparación entre los servicios de una señal ISDB-Tb y los servicios realocados. \textbf{(*)} Limitación impuesta por el cliente, Mara. Implementaciones más sofisticadas podrían dar soporte.\label{tab:evalcomparison}} 

% Reemplazar esto por un footnote que explique que esos dos (... como puede verse en la subsección tal ...) son limitaciones de implementacion del cliente, no del estándar. Así no hay que usar el plusmark del orto, que de otra manera, habría uqe explicar.

\end{figure}
\renewcommand{\thefootnote}{\arabic{footnote}}

\subsection{Flujos elementales múltiples}

Es normal que en los servicios de televisión digital se incluyan varios flujos elementales de un mismo tipo para un mismo servicio. Por ejemplo, la emisión de un partido de fútbol podría incluir múltiples audios para permitir la elección del relato a reproducir, posiblemente en distintos idiomas. Esto no suele ocurrir para el video.

En el caso de ISDB-Tb extendido, la red IP emite un flujo de transporte simple. Esto es un flujo que contiene un único servicio sin la inclusión de múltiples flujos elementales. Esto puede considerarse una limitación del diseño pero resulta importante, para los servicios que viajan por IP, la eliminación de toda información redundante. Si se emitieran múltiples flujos de audio a través el mismo flujo, entonces algunos de ellos serían ignorados, incurriendo en un desperdicio innecesario de ancho de banda. En otras palabras, todos los audios, menos aquel que se está reproduciendo, serían inútiles.

\subsection{Guía electrónica de programación}

La guía electrónica de programación (o EPG por sus siglas en inglés) contiene información acerca de los eventos en los servicios del flujo de transporte. La información que compone a la guía de programación se construye por las emisoras de contenido y se envía a los decodificadores a través de la EIT(\emph{Event Information Table}). Las secciones que componen una EIT pueden alcanzar los 4096 bytes. Cabe remarcar que cada sección guarda un bloque de tres horas de eventos.

Se suele denotar EIT-k a cada sección, donde un k mayor denota un bloque más lejano en el tiempo. Así, EIT-0 describe los eventos de las próximas tres horas y EIT-1 los eventos de las tres horas siguientes. En consecuencia hay 4096 bytes para describir los eventos que ocurren en todos los servicios en el intervalo de tiempo que le corresponde a la sección.

El tamaño de cada descripción de evento depende del título del mismo y del texto asociado. Por esto, es imposible determinar cuántos servicios se pueden describir, pero se puede realizar una estimación sobre el espacio disponible para cada evento, dada una lista de servicios.

Asumiendo que la lista de servicios del flujo de transporte posee 50 entradas (limitación impuesta por la sección de la SDT), y que en tres horas cada servicio aparecen dos eventos, se deben describir 100 eventos. 

\begin{figure}[h]
	\begin{center}
	\includegraphics[width=12cm]{imgs/eit_section_syntax.png}
	\caption{Representación ilustrativa de la sintaxis de una sección de EIT\label{fig:eit_section_syntax}} 
	\end{center}
\end{figure}

La \cref{fig:eit_section_syntax} ilustra el formato de una sección de la EIT. El encabezado de la EIT ocupa los primeros 14 bytes, y cada evento, a su vez, tiene un tamaño base de 12 bytes. Esto significa que de los 4096 bytes disponibles de la sección, 2882 pueden utilizarse para títulos y descripción de eventos. Lo cual da un promedio de $29$ bytes por evento para título y descripción.

\begin{figure}[h]
	\begin{center}
	\includegraphics[width=14cm]{imgs/eit_size.png}
	\caption{Gráfico de puntos que describe la disponibilidad de caracteres para la descripción de eventos en la EIT\label{fig:eit_size}} 
	\end{center}
\end{figure}

La \cref{fig:eit_size} establece una relación entre el número de eventos a describir y la cantidad de caracteres disponibles. A partir de los 20 eventos, la disponibilidad cae debajo de los 200. En conclusión, no es posible describir acordemente todos los servicios incluidos en el flujo de transporte extendido a través de la EIT, salvando la inclusión del nombre del evento y la información textual asociada a alguno de ellos.

\subsection{\emph{Closed Captioning}}

Existen varios estándares ampliamente difundidos para la transmisión de \emph{Closed Caption}. El formato estándar para ISDB-Tb se define en ARIB-B37. Otro tipo también muy difundido, pero más popular en otras normas como ATSC, es CEA 608 y su sucesor CEA 708\cite{ceaclosedcaption}, denominados comúnmente simplemente por el número. Existe una diferencia principal entre ambos formatos que propone una clasificación de los estándares de subtitulado.

\begin{itemize}
	\item \textbf{Embebidos}: En esta categoría se encuentran los formatos 608 y 708. Los subtítulos de esta categoría se incluyen en un espacio preasignado de un flujo externo. Por ejemplo, el formato de video H.264 provee un espacio de usuario para incluir, entre otras cosas, subtítulos. La característica que define a esta categoría es que no necesitan señalización en la PMT, dado que los \emph{Closed Caption} forman parte del flujo elemental de video.
	\item \textbf{Señalizados}: Categorizamos en este grupo a los canales de \emph{Closed Caption} que deben ser referidos por la \pmt\ y que viajan en un flujo elemental con su propio PID. En esta categoría entra el formato ARIB-37.
\end{itemize}

Mara no posee la funcionalidad de reproducir ninguno de los dos tipos. La imposibilidad de reproducir subtítulos señalizados viene dada por el diseño de la señalización. Por otro lado, la imposibilidad de reproducir los subtítulos embebidos se debe a la forma que Wari reproduce los flujos elementales. 

Reproducir el \emph{Closed Caption} de la primer categoría requeriría de Mara leer la PMT del servicio realocado para demultiplexar los paquetes que transportan los datos de subtitulado. Para esto, \emph{mpegparser} debería filtrar los paquetes involucrados y realizar el \emph{parsing}.

Los subtítulos de la segunda categoría pueden ser manejados directamente por el reproductor, dado que forman parte del video. El cambio necesario implica enviar un mensaje al reproductor para active la pista de subtítulos correspondiente. La complejidad de la modificación depende el estándar de \emph{Closed Caption}, pero no implica la lectura del flujo de transporte en \emph{mpegparser}.

\subsection{Trazabilidad}

El esquema de emisión en las señales ISDB-Tb es \emph{broadcast}. En este esquema los consumidores son anónimos, lo cual implica que es imposible establecer si un receptor está consumiendo un servicio dado. En el caso de los servicios realocados, las redes IP identifican a los \emph{hosts} unívocamente a través de una dirección IP. Para saber si un receptor consume un servicio tranportado por IP, éste puede ser asociado a una dirección y determinar a qué grupo multicast está unido. 
[TODO: Definir si se saca o no. Si queda, hay que buscar algo para decir al respecto, así no puede quedar.]

\subsection{Aplicaciones Interactivas}

\textbf{\emph{Digital storage media command and control}}(DSM-CC)[TODO: Apéndice] es el mecanismo que utiliza la televisión digital para la distribución de aplicaciones interactivas, definido en MPEG-2, parte 6. DSM-CC provee un conjunto de herramientas para el desarrollo de canales de control en un modelo cliente/servidor. Empero, es imposible implementar directamente este modelo en la norma ISDB-Tb por la naturaleza subyacente, donde no existe un canal de retorno para el cliente.

Las emisiones \emph{broadcast} de televisión digital, entonces, hacen uso de un carrusel de datos para solucionar este problema. El mismo consiste en la emisión periódica de los datos disponibles. Para que el cliente pueda acceder al cuerpo de datos que intenta obtener, simplemente debe esperar su emisión. Existen dos motivos por los que el nuevo diseño no puede realocar contenido DSM-CC a una red IP.

\begin{itemize}
\item \textbf{Implementación}: Actualmente, los contenidos recibidos a través de la red IP son alimentados directamente al reproductor audiovisual. Esto elimina la posibilidad de proveer el \emph{middleware} necesario para la ejecución de las aplicaciones. \emph{Mara} no posee la funcionalidad necesaria para redireccionar el contenido DSM-CC fuera del reproductor de video y audio hacia el intérprete de comandos.
\item \textbf{Diseño}: En una red IP existe un canal de retorno y el modelo cliente/servidor se aplica de manera natural. Además, el ancho de banda no es un flujo constante que debe ser aprovechado, sino que su mala utilización incurre en una sobrecarga innecesaria. Por estos motivos, la adición de soporte DSM-CC sugiere una implementación del protocolo diferente de la utilizada por receptores ISDB-Tb.    
\end{itemize}

Si se solucionara la ausencia de implementación de \emph{Mara}, la utilización de contenido DSM-CC en el formato establecido en la norma ISDB-Tb incurriría en un desaprovechamiento considerable del ancho de banda. Especialmente si se tiene en cuenta que la versión original del conjunto de herramientas DSM-CC se adecúa perfectamente al modelo de comunicación unicast con retorno que ofrecen las redes IP.

En conclusión, mientras los servicios audiovisuales de una señal ISDB-Tb se realocan de forma natural como flujos a las redes IP, las aplicaciones interactivas deben ser tratadas de forma diferente. Preferiblemente utilizando el soporte completo que ofrece DSM-CC, para eliminar la necesidad del uso de un carrusel de datos.
% Explicar qué onda con el DSM-CC. Decir cómo funciona, y por qué no tiene sentido que se utilice a través de IP. Lo que sí es interesante, es pensar en una extensión de DSM-CC para referir recursos de internet, si es que no existe aún, porque esto facilita rotundamente el problema del carrusel de datos, etc. Puede estar buena esta sección. Lo importante es decir que el enfoque que la da la tvd a DSM-CC con carrusel de datos no tiene sentido.

% \subsection{Independencia de calidad del servicio}

% En la norma ISDB-Tb tradicional, un flujo de transporte ve limitado el tamaño de su lista de servicios por el ancho de banda constante que ofrece. En el caso de la realocación de servicios a través del \emph{service elementaries relocation descriptor}, el \emph{bitrate} de los flujos elementales no 

%\subsection{Averiguar qué onda con el scrambling y el acceso condicional} 

% Se podría stremear el certificado PKI por ISDB-Tb, por ejemplo.
% Un transport stream que refiere a dos servicios diferidos.
% Dos transport streams que refieren a dos servicios diferentes. Uno cada uno.
% Un transport stream que refiere a muchos servicios. Digamos 10.
% Un transport stream que refiere a 2 servicios. Uno de los cuales no tiene emisión.
% Closed caption
% Cómo se comportaría el acceso condicional con el esquema extendido
% Problemas de seguridad? Si alguien se pone a emitir algo en algún momento
% Todo el resto de las cosas deberían funcionar. Ver el tema del bitrate puede ser más complicado.
% Con este esquema es imposible usar varios audios.
% También es imposible mandar video por multicast y audio por ts.
% Todos los flujos elementales se deben enviar por el mismo medio.
% Está bueno que no le interesa al ts si el servicio es HD o SD. Inclusive podría cambiar, supongo yo.

\subsection{Tiempo de sintonización}

\begin{figure}[h]
	\begin{center}
	\includegraphics[width=10cm]{imgs/tune_time.png}
	\caption{Tiempos de sintonización\label{fig:tune_time}} 
	\end{center}
\end{figure}

Utilizando la infraestructura de prueba presentada en la \cref{fig:test_scheme} se realizaron mediciones sobre el tiempo de selección de un servicio. La \cref{fig:tune_time} presenta los resultados obtenidos clasificándolos por el servicio \emph{destino}, dado que este valor es independiente del servicio \emph{origen}. Hay cuatro escenarios posibles:

La medición de mayor magnitud corresponde a la selección de un servicio tradicional que se transmite por un flujo de transporte distinto al actual, obligando al reproductor a realizar una sintonización de banda. La demora para tal selección es de $1.8$ segundos. Por el contrario, si el servicio sí se encuentra en el mismo flujo de transporte, el tiempo de selección no supera las tres décimas de segundo.

Por las mediciones, es claro que el cuello de botella en el procedimiento radica en la sintonización de banda de frecuencia. Para los servicios cuyos flujos elementales vienen por una red IP, este proceso es innecesario, de modo que es esperable que este tiempo se reduzca drásticamente. Sin embargo, la \cref{fig:tune_time} muestra lo contrario. Para explicar esto, es necesario retomar el proceso de sintonización detallado en el capítulo de introducción técnica.

El diagrama de flujos de la \cref{fig:seqplaymara} expone el proceso normal de selección de un servicio para su reproducción. El bloque de condición que verifica que el servicio que se busca sintonizar pertenezca a la banda de frecuencia que está sintonizada en ese momento contiene la mayoría del tiempo de demora del procedimiento completo. 

A pesar de ser innecesario, a simple vista, para un servicio que se obtiene por una interfaz distinta del dispositivo de sintonización, es necesario que este paso se conserve para todos los servicios, independientemente del origen de sus flujos elementales. Omitir este paso, sería elminar la posibilidad de cambiar cualquier información de origen. 

Por ejemplo, en el caso de los servicios realocados, sería imposible cambiar grupo multicast al que el servidor que realiza el \emph{streaming}. De lo contrario, los usuarios que encendieran el reproductor antes del cambio, seguirían intentando unirse al grupo multicast antiguo. El único lugar donde se reflejaría el cambio sería en la PAT que viaja en el flujo de transporte correspondiente a la señalización de servicio. Esto sería análogo a memorizar los PID de los flujos elementales provistos por una PMT y usarlos posteriormente. Un eventual cambio de PID para el flujo imposibiliaría la sintonización del servicio.

En resumen, si bien para obtener los flujos elementales de un servicio realocado no es necesario un cambio de sintonía, el proceso es necesario para garantizar la consistencia del proceso de sintonización. De esta manera, se evita la referencia de grupos multicast obsoletos y se permite la ubicación de nuevos servicios en la red IP.

\ifx\all\undefined
\end{document}
\fi