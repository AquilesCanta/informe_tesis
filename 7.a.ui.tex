\ifx\all\undefined
\include{0.base}
\begin{document}
\fi

\chapter{Software desarrollado}

El \textit{software} de la \sm~desarrollado se compone de dos proyectos denominados: \textit{egm} y \textit{egmui}. El proyecto \textit{egm} contiene la implementaci\'on descripta en los cap\'itulos 4 y 5,
mietras que \textit{egmui} implementa una interfaz gr\'afica que facilita la interacci\'on del usuario con el proyecto \textit{egm}. A continuaci\'on se describen detalles de la interacci\'on del usuario
con dicho \textit{software}.

\section{Proyecto Egm}
El proyecto \textit{egm} permite la interacci\'on del usuario con el \textit{software} de la \sm~mediante la l\'inea de comandos, sin necesidad de utilizar la \textit{UI}.
El usuario debe introducir ciertas letras o n\'umeros que se corresponden con determinadas acciones.
El fragmento de c\'odigo \ref{cod:appendix} muestra parte de la salida del comando \textit{h}(help) que lista los comandos que son aceptados y que permiten interactuar con la \sm.

\begin{lstlisting}[language=sh,numbers=none,label=cod:appendix,caption={Lista de comando aceptados por la \sm~en modo consola.}]
Game/>: h
[GAME]
 p 	 play 
 l 	 lines button
 b 	 bet button
 i 	 insert coin
 [HAL] 
 a 	 toogle main door open/close
 d 	 toogle demo switch on/off
 [PROTOCOLS]
 1 	 G2S set time
 2 	 PCP set time
 3 	 G2S get meter
 4 	 G2S get Meter

\end{lstlisting}
%  [PROTOCOLS]
%  1 	 G2S set time
%  2 	 PCP set time
%  3 	 G2S get meter
%  4 	 G2S get Meter
%  5 	 G2S get game recall
%  6 	 PCP get game recall
% 
% Game/>: 

\section{Proyecto EgmUI}

El proyecto \textit{egmui} utiliza la librer\'ia \textit{Qt Jambi}\cite{qtjambi}. La misma permite utilizar el \textit{framework}
\textit{Qt} para el desarrollo de interfaces gr\'aficas desde \textit{Java}. A continuaci\'on se describen los componentes de la interfaz.

La interfaz desarrollada se divide en tres componentes. La figura \ref{fig:appendix:egm1} muestra el componente principal de la vista, 
donde se indican los siguientes elementos:

\begin{enumerate}
 \item Indicador de la cantidad de cr\'editos que se est\'an apostando (\textit{bet per line}  x \textit{selected paylines}).
 \item Indicador de la cantidad de cr\'editos ganados en la \'ultima jugada.
 \item Bot\'on para cambiar la cantidad de l\'ineas apostadas.
 \item Bot\'on para cambiar la cantidad de cr\'editos apostados por l\'inea.
 \item Bot\'on para realizar la acci\'on de \textit{play}.
 \item Bot\'on para realizar la acci\'on de \textit{cashout}.
\end{enumerate}

\begin{figure}[ht!]
\centering
\includegraphics[scale=.4]{img/appendix/egm1.jpg}
\caption{Vista principal de la interfaz gr\'afica.}
\label{fig:appendix:egm1}
\end{figure}

% \begin{figure}[ht!]
% \centering
% \includegraphics[scale=.4]{img/appendix/egm2.jpg}
% \caption{}
% \label{fig:appendix:egm2}	
% \end{figure}

La interfaz cuenta con un segundo componente que permite el monitoreo de los \textit{meters}, \textit{game recalls} y hora de la \sm.
El mismo se puede ver en la figura \ref{fig:appendix:egm3}, donde se indica

:

\begin{enumerate}
 \item Es el listado de cada uno de los \textit{meters} con su valor asociado.
 \item Muestra la lista de los \'ultimos 10 \textit{game recalls}. Para cada uno se indica \textit{timestamp}, datos de la apuesta y cr\'editos ganados.
 \item Indica la hora de la \sm.
\end{enumerate}

\FloatBarrier

\begin{figure}[ht!]
\centering
\includegraphics[scale=.6]{img/appendix/egm3.jpg}
\caption{Vista de listado de \textit{meters}, \textit{game recalls} y hora de la \sm.}
\label{fig:appendix:egm3}
\end{figure}

La figura \ref{fig:appendix:egm4} muestra el panel que permite simular el comportamiento de los protocolos de 
comunicaci\'on y algunas funciones de la \textit{HAL}. Para los protocolos \textit{G2S} y \textit{PCP} es posible enviar los comandos:

\begin{itemize}
 \item \textit{Set time}.
 \item \textit{Get meter (GAME)}.
 \item \textit{Get game recall}.
\end{itemize}

Los eventos de la \textit{HAL} que pueden ser simulados desde dicho panel son:

\begin{itemize}
 \item Dispositivo: \textit{coin acceptor}, evento \textit{insert coin}.
 \item Dispositivo: \textit{Main door}, eventos: \textit{open, close}.
 \item Dispositivo: \textit{DIP switch}, eventos: \textit{Demo on, Demo off}.
\end{itemize}

\clearpage
\begin{figure}[ht!]
\centering
\includegraphics[scale=.4]{img/appendix/egm4.jpg}
\caption{Panel de control de \textit{HAL}, protocolos \textit{G2S} y \textit{PCP}.}
\label{fig:appendix:egm4}
\end{figure}

Adem\'as este panel cuenta con el \textit{log} de los eventos recibidos por cada protocolo. En \textbf{1} de la figura \ref{fig:appendix:egm4}, se puede ver la recepci\'on de la
notificaci\'on de la \textit{error condition} \textit{Door open} y en \textbf{2} se observa la respuesta al comando \textit{Get Meter} en el protocolo \textit{PCP}.


\ifx\all\undefined
\end{document}
\fi